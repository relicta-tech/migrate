# Relicta Migrate

Migration tool for switching to [Relicta](https://github.com/relicta-tech/relicta) from other release management tools.

## Supported Tools

| Tool | Config Files |
|------|--------------|
| **semantic-release** | `.releaserc`, `.releaserc.json`, `.releaserc.yaml`, `release.config.js`, `package.json` |
| **release-it** | `.release-it.json`, `.release-it.yaml`, `.release-it.js`, `package.json` |
| **standard-version** | `.versionrc`, `.versionrc.json`, `package.json` |

## Installation

### Homebrew (macOS/Linux)

```bash
brew install relicta-tech/tap/migrate
```

### Go Install

```bash
go install github.com/relicta-tech/migrate@latest
```

### Download Binary

Download from [GitHub Releases](https://github.com/relicta-tech/migrate/releases).

## Usage

### Auto-detect and Convert

```bash
# In your project directory
migrate

# Or specify a directory
migrate /path/to/project
```

### Preview Changes (Dry Run)

```bash
migrate --dry-run
```

### Detect Tool Only

```bash
migrate detect
```

### Options

```
Flags:
  -o, --output string   Output file path (default "release.config.yaml")
  -n, --dry-run         Preview changes without writing files
  -v, --verbose         Enable verbose output
  -f, --force           Overwrite existing release.config.yaml
  -h, --help            Help for migrate
```

## What Gets Migrated

### From semantic-release

| semantic-release | Relicta |
|------------------|---------|
| `tagFormat: "v${version}"` | `versioning.tag_prefix: "v"` |
| `branches` | `git.allowed_branches` |
| `@semantic-release/github` | `plugins.github` |
| `@semantic-release/npm` | `plugins.npm` |
| `@semantic-release/gitlab` | `plugins.gitlab` |

### From release-it

| release-it | Relicta |
|------------|---------|
| `git.tagName` | `versioning.tag_prefix` |
| `git.commitMessage` | `git.commit_message` |
| `git.requireCleanWorkingDir` | `git.require_clean_tree` |
| `github.release` | `plugins.github` |
| `npm.publish` | `plugins.npm` |

### From standard-version

| standard-version | Relicta |
|------------------|---------|
| `tagPrefix` | `versioning.tag_prefix` |
| `skip.changelog` | `changelog.enabled` |
| `skip.tag` | `git.create_tag` |
| `releaseCommitMessageFormat` | `git.commit_message` |
| `infile` | `changelog.file` |

## Example Output

```yaml
# Relicta Release Configuration
# Generated by relicta-migrate

versioning:
  strategy: conventional
  tag_prefix: v

changelog:
  enabled: true
  file: CHANGELOG.md

git:
  require_clean_tree: true
  push_tags: true
  create_tag: true
  allowed_branches:
    - main
    - next

plugins:
  - name: github
    enabled: true
  - name: npm
    enabled: true
```

## After Migration

1. **Review** the generated `release.config.yaml`
2. **Test** with `relicta plan --dry-run`
3. **Remove** old configuration files when ready:
   ```bash
   rm .releaserc* .release-it* .versionrc*
   ```

## Limitations

- **JavaScript configs** (`.js`, `.cjs`, `.ts`) are detected but cannot be fully parsed. Review the generated config manually.
- **Custom plugins** from semantic-release are marked for manual migration.
- **exec commands** need to be converted to Relicta hooks manually.

## Contributing

Contributions welcome! Please read [CONTRIBUTING.md](CONTRIBUTING.md).

## License

MIT License - see [LICENSE](LICENSE)
